<h1 style="max-width: 1000px; margin: auto; text-align: center;">Abre la consola para ver el resultado</h1>

<script>
    let characters;
    let collectedCharacters = [];
    let collectedCharacters2 = [];
    // 1
    const getWomansName = () => {
        // const r = ...
        // console.log('getWomansName(): ' , r);
        const woman = characters.filter((character) => character.gender === 'female').map((character) => character.name)
        console.log('1. getWomansName():', woman)
    }
    // 2 Devuelve un array de objetos con altura menod 10 cm de cada personaje
    const getSmallerPeople = () => {
        const smallerPeople = characters.map((character) => ({ ...character, height: character.height - 10 }));
        console.log('2. getSmallerPeople(): ', smallerPeople)
    }
    // 3
    const sumaDePeso = () => {
        const sumaPeso = characters.reduce((acc, character) => acc + Number(character.mass), 0)
        console.log('3. sumaDePeso(): ', sumaPeso)
    }
    // 4
    const mediaDeAltura = () => {
        const mediaAltura = characters.reduce((acc, character) => acc + character.height, 0) / characters.length
        console.log('4. mediaDeAltura(): ', mediaAltura)
    }
    // 5 
    const collectByIndex = (index) => {
        const byIndex = characters[index]
        console.log(byIndex)
        collectedCharacters.push(byIndex)
        console.log('5. collectByIndex():', collectedCharacters)
    }
    // 6 
    const collectByName = (characterName) => {
        const byName = characters.find((character) => character.name === characterName)
        collectedCharacters.push(byName)
        console.log('6. collectByName():', collectedCharacters)
    }

    // 7 
    const removeByName = (characterName) => {
        const removeName = collectedCharacters.filter((character) => character.name !== characterName)
        //console.log(`removeByName(): ${collectedCharacters}`) <--- no es correcto para objetos
        console.log('7. removeByName():', removeName);
    }

    // 8 
    const getCharacterFilms = (characterName) => {
        const characterFilms = characters.find((character) => character.name === characterName)
        console.log('8. getCharacterFilms():', characterFilms.films)

    }

    //9 COMPLICADO!!!!
    const collectByName2 = (characterName) => {
        const characterName2 = collectedCharacters2.find((character) => character.name === characterName)
        if (characterName2) {
            characterName2.amount = characterName2.amount + 1
        } else {
            const selectedChar = characters.find((character) => character.name === characterName)
            collectedCharacters2.push({ ...selectedChar, amount: 1 })
        }
        console.log('9. collectByName2():', collectedCharacters2)
    }

    //10 
    const mediaDeAltura2 = () => {
        const mediaAltura2 = collectedCharacters2.reduce((acc, character) => acc + Number(character.height), 0) / collectedCharacters2.length
        console.log(`10. mediaDeAltura(): ${mediaAltura2}`)
    }


    //11
    const removeByName2 = (characterName) => {
        const removeName2 = collectedCharacters2.filter((character) => character.name !== characterName)
        //console.log(`removeByName(): ${collectedCharacters}`) <--- no es correcto para objetos
        console.log('11. removeByName2():', removeName2);
    }




    fetch('https://swapi.py4e.com/api/people')
        .then(res => res.json())
        .then(data => {
            characters = data.results;
            // Aquí ejecutaremos las llamadas a las funciones que definiremos más arriba

            console.log(characters);
            getWomansName();
            getSmallerPeople();
            sumaDePeso();
            mediaDeAltura();
            collectByIndex(1);// C-3PO
            collectByName('Luke Skywalker');
            collectByName('R2-D2');
            removeByName('C-3PO')
            getCharacterFilms('R2-D2');
            collectByName2('Luke Skywalker');
            collectByName2('R2-D2');
            collectByName2('Leia Organa');
            collectByName2('Leia Organa');
            mediaDeAltura2();
            removeByName2('Luke Skywalker')
        });


    // let characters;
    // let collectedCharacters = [];
    // let collectedCharacters2 = [];

    // const getWomansName = () => {
    //     const femaleCharacters = characters.filter(
    //         (character) => character.gender === "female"
    //     );

    //     const femaleCharactersName = femaleCharacters.map(
    //         (character) => character.name
    //     );

    //     console.log(femaleCharactersName);
    // };

    // const getSmallerPeople = () => {
    //     const r = characters.map((character) => ({
    //         ...character,
    //         height: character.height - 10,
    //     }));

    //     console.log("getSmallerPeople: ", r);
    // };

    // const sumaDePeso = () => {
    //     const r = characters.reduce(
    //         (sumaTotal, character) => sumaTotal + Number(character.mass),
    //         0
    //     );
    //     console.log("sumaDePeso: ", r);
    // };

    // const mediaDeAltura = () => {
    //     const media =
    //         characters.reduce(
    //             (sumaTotalDeAlturas, character) =>
    //                 sumaTotalDeAlturas + character.height,
    //             0
    //         ) / characters.length;
    //     console.log("mediaDeAltura: ", media);
    // };

    // const collectByIndex = (index) => {
    //     const selectedCharacter = characters[index];
    //     collectedCharacters.push(selectedCharacter);
    //     //  collectedCharacters = [...collectedCharacters, selectedCharacter]
    //     console.log("collectByIndex", collectedCharacters);
    // };

    // const collectByName = (characterName) => {
    //     const selectedCharacter = characters.find(
    //         (character) => (character.name = characterName)
    //     );
    //     collectedCharacters.push(selectedCharacter);
    //     console.log("collectByName", collectedCharacters);
    // };

    // const removeByName = (characterName) => {
    //     collectedCharacters = collectedCharacters.filter(
    //         (character) => character.name !== characterName
    //     );
    //     console.log("removeByName: ", collectedCharacters);
    // };

    // const getCharacterFilms = (characterName) => {
    //     const selectedCharacter = characters.find(
    //         (character) => character.name === characterName
    //     );
    //     console.log("getCharacterFilms", selectedCharacter.films);
    // };

    // const collectByName2 = (characterName) => {
    //     const selectedCharacter = characters.find(
    //         (character) => (character.name = characterName)
    //     );
    //     const characterInCollectedCharacter2 = collectedCharacters2.find(
    //         (character) => character.name === characterName
    //     );

    //     if (characterInCollectedCharacter2 == null) {
    //         collectedCharacters2.push({ ...selectedCharacter, amount: 1 });
    //     } else {
    //         characterInCollectedCharacter2.amount =
    //             characterInCollectedCharacter2.amount + 1;
    //     }
    //     console.log("collectedCharacter2", collectedCharacters2);
    // };

    // const mediaAltura2 = () => {
    //     const media =
    //         collectedCharacters2.reduce(
    //             (sumaAlturas, character) => sumaAlturas + character.height,
    //             0
    //         ) / collectedCharacters2.length;
    //     console.log("media: ", media);
    // };

    // const removeByName2 = (characterName) => {
    //     console.log("removeByName2: ", collectedCharacters2);

    //     collectedCharacters2 = collectedCharacters2.filter(
    //         (character) => character.name !== characterName
    //     );
    //     console.log("removeByName2: ", collectedCharacters2);
    // };

    // fetch("https://swapi.py4e.com/api/people")
    //     .then((res) => res.json())
    //     .then((data) => {
    //         characters = data.results;
    //         // Aquí ejecutaremos las llamadas a las funciones que definiremos más arriba
    //         console.log(characters);
    //         getWomansName();
    //         getSmallerPeople();
    //         sumaDePeso();
    //         mediaDeAltura();
    //         collectByIndex(3);
    //         collectByName("Leia Organa");
    //         removeByName("Darth Vader");
    //         getCharacterFilms("Leia Organa");
    //         collectByName2("Leia Organa");
    //         collectByName2("Leia Organa");
    //         mediaAltura2();
    //         removeByName2("Leia Organa");
    //     });



</script>